import{createSlice}from"@reduxjs/toolkit";let initialUser=window.localStorage.getItem("user");initialUser=initialUser?JSON.parse(initialUser):{name:"",year:"",email:"",sex:"male",status:"manager",date:+new Date};let initialAnswers=window.localStorage.getItem("answers");initialAnswers=initialAnswers?JSON.parse(initialAnswers):{};const initialState={user:initialUser,step:6,auth:!0,answers:initialAnswers},userSlice=createSlice({name:"user",initialState,reducers:{setUser(e,{payload:s}){const a=+s.date;e.user={...s,date:a},e.auth=!0,localStorage.setItem("user",JSON.stringify(e.user))},setStep(e,{payload:s}){e.auth&&(e.step=s)},addAnswers(e,{payload:{id:s,module:a,val:t}}){e.answers[s]||(e.answers[s]={}),e.answers[s][a]||(e.answers[s][a]=[]),e.answers[s][a].includes(t)||e.answers[s][a].push(t),localStorage.setItem("answers",JSON.stringify(e.answers))},removeAnswers(e,{payload:{id:s,module:a,val:t}}){e.answers[s][a]=e.answers[s][a].filter((e=>e!==t)),0===e.answers[s][a].length&&delete e.answers[s][a],0===Object.keys(e.answers[s]).length&&delete e.answers[s],localStorage.setItem("answers",JSON.stringify(e.answers))}}});export const{setStep,setUser,addAnswers,removeAnswers}=userSlice.actions;export default userSlice.reducer;