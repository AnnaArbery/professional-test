import{createSlice}from"@reduxjs/toolkit";let initialUser=window.localStorage.getItem("user");initialUser=initialUser?JSON.parse(initialUser):{name:"",year:"",email:"",sex:"male",status:"manager",date:+new Date};let initialAnswers=window.localStorage.getItem("answers");initialAnswers=initialAnswers?JSON.parse(initialAnswers):{};const initialState={user:initialUser,step:6,auth:!0,answers:initialAnswers,needs:{},employment:[],employmentTitle:[]},userSlice=createSlice({name:"user",initialState,reducers:{setUser(e,{payload:s}){const t=+s.date;e.user={...s,date:t},e.auth=!0,localStorage.setItem("user",JSON.stringify(e.user))},setStep(e,{payload:s}){e.auth&&(e.step=s)},addAnswers(e,{payload:{id:s,module:t,val:a}}){e.answers[s]||(e.answers[s]={}),e.answers[s][t]||(e.answers[s][t]=[]),e.answers[s][t].includes(a)||e.answers[s][t].push(a),localStorage.setItem("answers",JSON.stringify(e.answers))},setNeeds(e,{payload:{title:s,value:t}}){e.needs[s]=t},setEmpoyment(e,{payload:s}){e.employment=[...s]},setEmploymentTitle(e,{payload:{id:s,title:t}}){e.employmentTitle[s]=t},removeAnswers(e,{payload:{id:s,module:t,val:a}}){e.answers[s][t]=e.answers[s][t].filter((e=>e!==a)),0===e.answers[s][t].length&&delete e.answers[s][t],0===Object.keys(e.answers[s]).length&&delete e.answers[s],localStorage.setItem("answers",JSON.stringify(e.answers))}}});export const{setStep,setUser,addAnswers,removeAnswers,setNeeds,setEmpoyment,setEmploymentTitle}=userSlice.actions;export default userSlice.reducer;